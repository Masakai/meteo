# ダッシュボード用Dockerイメージ（軽量）
#
# Copyright (c) 2026 Masanori Sakai
# Licensed under the MIT License

FROM python:3.11-slim

WORKDIR /app

# 必要なファイルをコピー
COPY dashboard*.py .
COPY astro_utils.py .

# 依存関係をインストール（検出時間計算に必要）
RUN pip install --no-cache-dir astral

# タイムゾーン設定
ENV TZ=Asia/Tokyo
RUN ln -sf /usr/share/zoneinfo/Asia/Tokyo /etc/localtime && \
    echo "Asia/Tokyo" > /etc/timezone

ENV PORT=8080

EXPOSE 8080

CMD ["python", "dashboard.py"]
